/**
 * Global constants used throughout the application.
 * @constant
 * @type {Object}
 * @property {number} LUMA_R - Red coefficient for luma calculation.
 * @property {number} LUMA_G - Green coefficient for luma calculation.
 * @property {number} LUMA_B - Blue coefficient for luma calculation.
 * @property {number[]} RESOLUTION_STOPS - Pre-calculated resolution stops.
 * @property {number[][]} BAYER4 - 4x4 Bayer matrix for ordered dithering.
 * @property {number[][]} BAYER8 - 8x8 Bayer matrix for ordered dithering.
 */
export const CONSTANTS = {
    LUMA_R: 0.299,
    LUMA_G: 0.587,
    LUMA_B: 0.114,
    RESOLUTION_STOPS: Array.from({length: 20}, (_, i) => (i + 1) * 32),
    BAYER4: [[0, 8, 2, 10],[12, 4, 14, 6],[3, 11, 1, 9],[15, 7, 13, 5]],
    BAYER8: [
        [ 0, 48, 12, 60,  3, 51, 15, 63],
        [32, 16, 44, 28, 35, 19, 47, 31],
        [ 8, 56,  4, 52, 11, 59,  7, 55],
        [40, 24, 36, 20, 43, 27, 39, 23],
        [ 2, 50, 14, 62,  1, 49, 13, 61],
        [34, 18, 46, 30, 33, 17, 45, 29],
        [10, 58,  6, 54,  9, 57,  5, 53],
        [42, 26, 38, 22, 41, 25, 37, 21]
    ]
};

/**
 * Collection of color palettes.
 * Each palette is an array of RGB arrays [r, g, b].
 * @constant
 * @type {Object.<string, number[][]>}
 */
export const PALETTES = {
    'bw': [[0,0,0], [255,255,255]],
    'gb': [[15,56,15], [48,98,48], [139,172,15], [155,188,15]],
    'cga1': [[0,0,0], [85,255,255], [255,85,255], [255,255,255]],
    'cga2': [[0,0,0], [85,255,85], [255,85,85], [255,255,85]],
    'ega': [
        [0,0,0],[0,0,170],[0,170,0],[0,170,170],[170,0,0],[170,0,170],[170,85,0],[170,170,170],
        [85,85,85],[85,85,255],[85,255,85],[85,255,255],[255,85,85],[255,85,255],[255,255,85],[255,255,255]
    ],
    'c64': [
        [0,0,0],[255,255,255],[136,0,0],[170,255,238],[204,68,204],[0,204,85],[0,0,170],[238,238,119],
        [221,136,85],[102,68,0],[255,119,119],[51,51,51],[119,119,119],[170,255,102],[0,136,255],[187,187,187]
    ],
    'nes': [
        [124,124,124], [0,0,252], [0,0,188], [68,40,188], [148,0,132], [168,0,32], [168,16,0], [136,20,0],
        [80,48,0], [0,120,0], [0,104,0], [0,88,0], [0,64,88], [0,0,0], [0,0,0], [0,0,0],
        [188,188,188], [0,120,248], [0,88,248], [104,68,252], [216,0,204], [228,0,88], [248,56,0], [228,92,16],
        [172,124,0], [0,184,0], [0,168,0], [0,168,68], [0,136,136], [0,0,0], [0,0,0], [0,0,0],
        [248,248,248], [60,188,252], [104,136,252], [152,120,248], [248,120,248], [248,88,152], [248,120,88], [252,160,68],
        [248,184,0], [184,248,24], [88,216,84], [88,248,152], [0,232,216], [120,120,120], [0,0,0], [0,0,0],
        [252,252,252], [164,228,252], [184,184,248], [216,184,248], [248,184,248], [248,164,192], [240,208,176], [252,224,168],
        [248,216,120], [216,248,120], [184,248,184], [184,248,216], [0,252,252], [248,216,248], [0,0,0], [0,0,0]
    ],
    'vapor': [[255,113,206], [1,205,254], [5,255,161], [185,103,255], [255,251,150], [20,20,40], [60,20,60], [255,255,255]],
    'redscale': [[0,0,0], [50,0,0], [100,0,0], [150,0,0], [200,0,0], [255,0,0]],
    'matrix': [[0,0,0], [0,50,0], [0,100,0], [0,150,0], [0,200,0], [0,255,0], [200,255,200]]
};

/**
 * Generates the standard VGA 256 color palette.
 * @returns {number[][]} An array of 256 colors, each representing [r, g, b].
 */
const generateVGA = () => {
    const p = [
        [0,0,0], [0,0,170], [0,170,0], [0,170,170], [170,0,0], [170,0,170], [170,85,0], [170,170,170],
        [85,85,85], [85,85,255], [85,255,85], [85,255,255], [255,85,85], [255,85,255], [255,255,85], [255,255,255]
    ];
    for(let i=0; i<16; i++) p.push([Math.floor(i*(255/15)),Math.floor(i*(255/15)),Math.floor(i*(255/15))]);
    for(let r=0; r<6; r++) for(let g=0; g<6; g++) for(let b=0; b<6; b++) p.push([r*51, g*51, b*51]);
    return p.slice(0, 256);
};
PALETTES['vga'] = generateVGA();
